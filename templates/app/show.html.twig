{% extends 'base.html.twig' %}

{% block title %}{{ app.title }}{% endblock %}

{% block body %}
    <header>

    </header>
    <a href="{{ asset('uploads/images/'~app.id~'/cover.png') }}"> <img
                src="{{ asset('uploads/images/'~app.id~'/cover.png') }}" alt="cover"/></a>
    <div class="row">
        <div class="col-7">
            <h2>{{ app }}</h2>
            <p>{{ app.shortDescription }}</p>
            <p>{{ app.description }}</p>
            <h4>Autheur  : {{ app.developer.firstName ~' '~ app.developer.lastName ~' ('~ app.developer.email ~')'}}</h4>
            {% if app.executables|length >0 %}
                <h3><i class="fas fa-download"></i> Télécharger </h3>
                {% for executable in app.executables %}
                    <a href="{{ asset('uploads/files/'~app.id~'/'~executable.filename) }}">{{ app.title }}
                        ({{ executable.platform }}) </a> : {{ executable.showSize }}
                    {% if executable.platform == 'Windows' %}
                        <i class="fab fa-windows"></i>
                    {% elseif executable.platform == "Mac" %}
                        <i class="fab fa-apple"></i>
                    {% elseif executable.platform == "Linux" %}
                        <i class="fab fa-linux"></i>
                    {% elseif executable.platform == "Android" %}
                        <i class="fab fa-Android"></i>
                    {% endif %}
                {% endfor %}

            {% endif %}
            <p></p>
            <div>
                <h4><b>
                        {% if comments|length == 1 %}
                            Commentaire
                        {% else %}
                            Commentaires
                        {% endif %}
                    </b></h4>
            </div>
            {% if comments|length > 0 %}
                {% for comment in comments %}
                    <h5>{{ comment.author }} ({{ comment.email }})</h5>
                    <small>{{ comment.createdAt|format_datetime('medium', 'short') }}</small>
                    <p>{{ comment.text }}</p>
                {% endfor %}
                {% if previous >= 0 %}
                    <a href="{{ path('app-details', {slug:app.slug, offset:previous}) }}">Précédent</a>
                {% endif %}
                {% if next < comments|length %}
                    <a href="{{ path('app-details', {slug:app.slug, offset:next}) }}">Suivant</a>
                {% endif %}
            {% else %}
                <div>Aucun commentaire n'a été publiée. </div>
            {% endif %}
        </div>
        <div class="col-5">
            {% if app.screenshots|length > 0 %}
                <h4>Captures d'écran</h4>
                {% for screenshot in app.screenshots %}
                    <p><a href="{{ asset('uploads/images/'~app.id~'/'~screenshot.filename) }}"> <img
                                    src="{{ asset('uploads/images/'~app.id~'/'~screenshot.filename) }}"
                                    alt="Screenshot "/></a></p>
                {% endfor %}
            {% endif %}
        </div>
    </div>
{% endblock %}